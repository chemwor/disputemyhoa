[build]
# Directory to change to before starting a build
base = "."

# Directory that contains the deploy-ready HTML files and assets generated by the build
publish = "dist"

# Build command to run
command = "npm run build"

[build.environment]
# Node.js version for the build
NODE_VERSION = "18"

# Redirect rules - Remove the problematic 404 redirect
# [[redirects]]
# from = "/*"
# to = "/index.html"
# status = 404

# Add proper redirects for clean URLs (optional)
[[redirects]]
from = "/case-preview"
to = "/case-preview.html"
status = 200

# Custom headers for better performance
[[headers]]
for = "/assets/*"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.js"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.css"
[headers.values]
Cache-Control = "public, max-age=31536000, immutable"

[[headers]]
for = "*.html"
[headers.values]
Cache-Control = "public, max-age=0, must-revalidate"
